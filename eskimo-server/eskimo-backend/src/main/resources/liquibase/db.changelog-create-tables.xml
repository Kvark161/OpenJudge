<databaseChangeLog
		xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
		xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
		xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
                            http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.0.xsd">

	<changeSet id="create_users" author="kvark161">
		<createTable tableName="users">
			<column name="id" type="bigint" autoIncrement="true">
				<constraints primaryKey="true" nullable="false"/>
			</column>
			<column name="name" type="text">
				<constraints nullable="false" unique="true"/>
			</column>
			<column name="password" type="text">
				<constraints nullable="false"/>
			</column>
			<column name="is_admin" type="boolean">
				<constraints nullable="false"/>
			</column>
			<column name="locale" type="text">
				<constraints nullable="false"/>
			</column>
		</createTable>
		<createTable tableName="submissions">
			<column name="id" type="bigint" autoIncrement="true">
				<constraints primaryKey="true" nullable="false"/>
			</column>
			<column name="user_id" type="bigint">
				<constraints nullable="false" referencedTableName="users"
				             referencedColumnNames="id" foreignKeyName="fk_submissions_users"/>
			</column>
			<column name="contest_id" type="bigint">
				<constraints nullable="false"/>
			</column>
			<column name="problem_id" type="bigint">
				<constraints nullable="false"/>
			</column>
			<column name="source_code" type="text">
				<constraints nullable="false"/>
			</column>
			<column name="verdict" type="text">
				<constraints nullable="false"/>
			</column>
			<column name="sending_date_time" type="datetime">
				<constraints nullable="false"/>
			</column>
			<column name="test_number" type="bigint">

			</column>
		</createTable>
	</changeSet>

	<changeSet id="create_contests" author="lunawyll">
		<createTable tableName="contests">
			<column name="id" type="bigint" autoIncrement="true">
				<constraints primaryKey="true" nullable="false"/>
			</column>
			<column name="name" type="text">
				<constraints nullable="false"/>
			</column>
			<column name="start_time" type="timestamptz">
				<constraints nullable="true"/>
			</column>
			<column name="duration_in_minutes" type="int">
				<constraints nullable="true"/>
			</column>
		</createTable>

		<createTable tableName="statement">
			<column name="id" type="bigint" autoIncrement="true">
				<constraints primaryKey="true" nullable="false"/>
			</column>
			<column name="contest_id" type="bigint">
				<constraints nullable="false" referencedTableName="contests"
				             referencedColumnNames="id" foreignKeyName="fk_statements_contests"/>
			</column>
			<column name="language" type="text">
				<constraints nullable="false"/>
			</column>
			<column name="file_path" type="text">
				<constraints nullable="false"/>
			</column>
		</createTable>

		<createTable tableName="problems">
			<column name="id" type="bigint" autoIncrement="true">
				<constraints primaryKey="true" nullable="false"/>
			</column>
			<column name="contest_id" type="bigint">
				<constraints nullable="false" referencedTableName="contests"
				             referencedColumnNames="id" foreignKeyName="fk_problems_contests"/>
			</column>
			<column name="number_in_contest" type="int">
				<constraints nullable="false"/>
			</column>
			<column name="name" type="text">
				<constraints nullable="false"/>
			</column>
			<column name="time_limit" type="bigint">
				<constraints nullable="false"/>
			</column>
			<column name="memory_limit" type="bigint">
				<constraints nullable="false"/>
			</column>
			<column name="tests_count" type="bigint">
				<constraints nullable="false"/>
			</column>
		</createTable>
	</changeSet>

</databaseChangeLog>