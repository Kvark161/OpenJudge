<databaseChangeLog
		xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
		xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
		xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
                            http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.0.xsd">

	<changeSet id="create_users" author="kvark161">
		<createTable tableName="users">
			<column name="id" type="bigint" autoIncrement="true">
				<constraints primaryKey="true" nullable="false"/>
			</column>
			<column name="name" type="text">
				<constraints nullable="false" unique="true"/>
			</column>
			<column name="password" type="text">
				<constraints nullable="false"/>
			</column>
			<column name="is_admin" type="boolean">
				<constraints nullable="false"/>
			</column>
			<column name="locale" type="text">
				<constraints nullable="false" />
			</column>
		</createTable>
		<createTable tableName="submissions">
			<column name="id" type="bigint" autoIncrement="true">
				<constraints primaryKey="true" nullable="false"/>
			</column>
			<column name="user_id" type="bigint">
				<constraints nullable="false" referencedTableName="users"
				             referencedColumnNames="id" foreignKeyName="fk_submissions_users"/>
			</column>
			<column name="contest_id" type="bigint">
				<constraints nullable="false"/>
			</column>
			<column name="problem_id" type="bigint">
				<constraints nullable="false"/>
			</column>
			<column name="source_code" type="text">
				<constraints nullable="false"/>
			</column>
		</createTable>
	</changeSet>

</databaseChangeLog>